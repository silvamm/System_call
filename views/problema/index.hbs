{{#section 'css'}}
{{/section}}

<section class="card">
  <div class="card-header">Filtros</div>
  <div class="card-body">

    <div class="row">
      <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-10">
        <div class="form-group">
          <input class="form-control" type="search" value="" placeholder="Nome" name="Buscar">
        </div>
      </div>
      <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-2">
        <div class="form-group">
          <button class="btn btn-primary btn-block"><i class="fa fa-search"></i> Buscar</button>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="card">
  <div class="card-header">
    Problemas
  </div>
  <div class="card-body">
    <a class="btn btn-primary float-right" href="/problema"><i class="fa fa-plus"></i> Adicionar</a>

    <div class="table-responsive-xl">
      <table class="table table-bordered table-hover my-5">
        <thead>
          <tr>
            <th scope="col">Nome</th>
            <th scope="col" style="width: 20%" class="text-center">Ações</th>
          </tr>
        </thead>
        <tbody>
          {{#each problemas}}
          <tr>
            <td>{{nome}}</td>
            <td class="text-center">
              <a style="width: 80px;" type="button" class="btn btn-primary btn-sm my-1 " value="Editar"
                href='/problema/{{id}}'><i class="fa fa-pencil"></i> Editar</a>
              <button style="width: 80px;" type="button" class="btn btn-danger btn-sm" value="Excluir"
                onclick='excluir(this, {{id}})'><i class="fa fa-trash-o"></i> Excluir</button></td>
          </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  </div>
</section>


{{#section 'js'}}
<script>
  function excluir(item, id) {
    if (confirm("Deseja realmente excluir o registro ? ")) {
      $.ajax({
        type: 'delete',
        url: '/problema/' + id
      }).done(function () {
        let tr = $(item).closest('tr')
        tr.fadeOut(500, () => tr.remove())
      }).fail(function (jXHR) {
        console.log('Aconteceu um erro')
      })
    }
  }

</script>
{{/section}}